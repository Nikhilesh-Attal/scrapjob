{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///D:/react-project/scrapjob/src/app/api/scrape/route.ts"],"sourcesContent":["\nimport { NextResponse } from 'next/server';\nimport type { Job } from '@/types';\n\nconst GOOGLE_SHEET_URL = process.env.NEXT_PUBLIC_GOOGLE_SHEET_URL || '';\n\nexport async function GET(request: Request) {\n\n  if (!GOOGLE_SHEET_URL) {\n    console.error('Google Sheet URL is not configured.');\n    // Return an empty JSON array to prevent client-side parsing errors.\n    return NextResponse.json([], { status: 500 });\n  }\n\n  try {\n    console.log('Fetching fresh job data from Google Sheet...');\n    const response = await fetch(GOOGLE_SHEET_URL, {\n        next: { revalidate: 300 } // Re-fetch every 5 minutes\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch from Google Sheet: ${response.statusText}`);\n    }\n\n    const result = await response.json();\n    \n    // The Apps Script returns { data: [...] }, so we access result.data\n    const jobData = result.data;\n\n    if (!Array.isArray(jobData)) {\n        throw new Error(\"Fetched data is not in the expected format. Expected an object with a 'data' array.\");\n    }\n    \n    // The first row is headers, remove it before mapping\n    const jobRows = jobData.slice(1);\n    \n    const jobs: Job[] = jobRows.map((item: any, index: number) => {\n        const postedDate = item['Posted Date'] ? new Date(item['Posted Date']) : new Date();\n        return {\n          id: `${item['Apply URL'] || 'job'}-${index}`,\n          title: item['Title'] || 'N/A',\n          company: item['Company'] || 'N/A',\n          location: item['Location'] || 'N/A',\n          experience: item['Experience'] || 'N/A',\n          salary: item['Salary'] || 'Not Disclosed',\n          companyUrl: item['Company URL'] || '#',\n          applyLink: item['Apply URL'] || '#',\n          date: postedDate.toLocaleDateString(),\n          description: item['description'] || '',\n          experienceLevel: 'N/A', // This column does not exist in the sheet\n          contractType: item['Contract Type'] || 'N/A',\n          workType: item['Work Type'] || 'N/A',\n        };\n    });\n    \n    console.log(`Successfully fetched ${jobs.length} jobs.`);\n    return NextResponse.json(jobs);\n  } catch (error)\n {\n    console.error('Google Sheet API Error:', error);\n    // Return empty array on error to prevent crashing the frontend\n    return NextResponse.json([], { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;AACA;;AAGA,MAAM,mBAAmB,0JAA4C;AAE9D,eAAe,IAAI,OAAgB;IAExC,uCAAuB;;IAIvB;IAEA,IAAI;QACF,QAAQ,GAAG,CAAC;QACZ,MAAM,WAAW,MAAM,MAAM,kBAAkB;YAC3C,MAAM;gBAAE,YAAY;YAAI,EAAE,2BAA2B;QACzD;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,mCAAmC,EAAE,SAAS,UAAU,EAAE;QAC7E;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAElC,oEAAoE;QACpE,MAAM,UAAU,OAAO,IAAI;QAE3B,IAAI,CAAC,MAAM,OAAO,CAAC,UAAU;YACzB,MAAM,IAAI,MAAM;QACpB;QAEA,qDAAqD;QACrD,MAAM,UAAU,QAAQ,KAAK,CAAC;QAE9B,MAAM,OAAc,QAAQ,GAAG,CAAC,CAAC,MAAW;YACxC,MAAM,aAAa,IAAI,CAAC,cAAc,GAAG,IAAI,KAAK,IAAI,CAAC,cAAc,IAAI,IAAI;YAC7E,OAAO;gBACL,IAAI,GAAG,IAAI,CAAC,YAAY,IAAI,MAAM,CAAC,EAAE,OAAO;gBAC5C,OAAO,IAAI,CAAC,QAAQ,IAAI;gBACxB,SAAS,IAAI,CAAC,UAAU,IAAI;gBAC5B,UAAU,IAAI,CAAC,WAAW,IAAI;gBAC9B,YAAY,IAAI,CAAC,aAAa,IAAI;gBAClC,QAAQ,IAAI,CAAC,SAAS,IAAI;gBAC1B,YAAY,IAAI,CAAC,cAAc,IAAI;gBACnC,WAAW,IAAI,CAAC,YAAY,IAAI;gBAChC,MAAM,WAAW,kBAAkB;gBACnC,aAAa,IAAI,CAAC,cAAc,IAAI;gBACpC,iBAAiB;gBACjB,cAAc,IAAI,CAAC,gBAAgB,IAAI;gBACvC,UAAU,IAAI,CAAC,YAAY,IAAI;YACjC;QACJ;QAEA,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,KAAK,MAAM,CAAC,MAAM,CAAC;QACvD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OACV;QACG,QAAQ,KAAK,CAAC,2BAA2B;QACzC,+DAA+D;QAC/D,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,EAAE,EAAE;YAAE,QAAQ;QAAI;IAC7C;AACF","debugId":null}}]
}